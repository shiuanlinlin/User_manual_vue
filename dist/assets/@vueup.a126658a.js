import{Q as c}from"./quill.92d670e6.js";import{D as B}from"./quill-delta.ac4408af.js";import{d as D,o as R,a as F,r as k,w as f,h as U,n as M}from"./@vue.73b154b2.js";/*!
 * VueQuill @vueup/vue-quill v1.1.1
 * https://vueup.github.io/vue-quill/
 * 
 * Includes quill v1.3.7
 * https://quilljs.com/
 * 
 * Copyright (c) 2023 Ahmad Luthfi Masruri
 * Released under the MIT license
 * Date: 2023-03-08T12:39:52.151Z
 */const _={essential:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}],["blockquote","code-block","link"],[{color:[]},"clean"]],minimal:[[{header:1},{header:2}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}]],full:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","video","image"],["clean"]]},J=D({name:"QuillEditor",inheritAttrs:!1,props:{content:{type:[String,Object]},contentType:{type:String,default:"delta",validator:t=>["delta","html","text"].includes(t)},enable:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},placeholder:{type:String,required:!1},theme:{type:String,default:"snow",validator:t=>["snow","bubble",""].includes(t)},toolbar:{type:[String,Array,Object],required:!1,validator:t=>typeof t=="string"&&t!==""?t.charAt(0)==="#"?!0:Object.keys(_).indexOf(t)!==-1:!0},modules:{type:Object,required:!1},options:{type:Object,required:!1},globalOptions:{type:Object,required:!1}},emits:["textChange","selectionChange","editorChange","update:content","focus","blur","ready"],setup:(t,i)=>{R(()=>{b()}),F(()=>{o=null});let o,m;const r=k(),b=()=>{var e;if(!!r.value){if(m=w(),t.modules)if(Array.isArray(t.modules))for(const n of t.modules)c.register(`modules/${n.name}`,n.module);else c.register(`modules/${t.modules.name}`,t.modules.module);o=new c(r.value,m),d(t.content),o.on("text-change",L),o.on("selection-change",S),o.on("editor-change",E),t.theme!=="bubble"&&r.value.classList.remove("ql-bubble"),t.theme!=="snow"&&r.value.classList.remove("ql-snow"),(e=o.getModule("toolbar"))===null||e===void 0||e.container.addEventListener("mousedown",n=>{n.preventDefault()}),i.emit("ready",o)}},w=()=>{const e={};if(t.theme!==""&&(e.theme=t.theme),t.readOnly&&(e.readOnly=t.readOnly),t.placeholder&&(e.placeholder=t.placeholder),t.toolbar&&t.toolbar!==""&&(e.modules={toolbar:(()=>{if(typeof t.toolbar=="object")return t.toolbar;if(typeof t.toolbar=="string")return t.toolbar.charAt(0)==="#"?t.toolbar:_[t.toolbar]})()}),t.modules){const n=(()=>{var l,s;const u={};if(Array.isArray(t.modules))for(const q of t.modules)u[q.name]=(l=q.options)!==null&&l!==void 0?l:{};else u[t.modules.name]=(s=t.modules.options)!==null&&s!==void 0?s:{};return u})();e.modules=Object.assign({},e.modules,n)}return Object.assign({},t.globalOptions,t.options,e)},v=e=>typeof e=="object"&&e?e.slice():e,A=e=>Object.values(e.ops).some(n=>!n.retain||Object.keys(n).length!==1);let a;const h=e=>{if(typeof a==typeof e){if(e===a)return!0;if(typeof e=="object"&&e&&typeof a=="object"&&a)return!A(a.diff(e))}return!1},L=(e,n,l)=>{a=v(g()),h(t.content)||i.emit("update:content",a),i.emit("textChange",{delta:e,oldContents:n,source:l})},y=k(),S=(e,n,l)=>{y.value=!!(o!=null&&o.hasFocus()),i.emit("selectionChange",{range:e,oldRange:n,source:l})};f(y,e=>{e?i.emit("focus",r):i.emit("blur",r)});const E=(...e)=>{e[0]==="text-change"&&i.emit("editorChange",{name:e[0],delta:e[1],oldContents:e[2],source:e[3]}),e[0]==="selection-change"&&i.emit("editorChange",{name:e[0],range:e[1],oldRange:e[2],source:e[3]})},Q=()=>r.value,x=()=>{var e;return(e=o==null?void 0:o.getModule("toolbar"))===null||e===void 0?void 0:e.container},H=()=>{if(o)return o;throw`The quill editor hasn't been instantiated yet, 
                  make sure to call this method when the editor ready
                  or use v-on:ready="onReady(quill)" event instead.`},g=(e,n)=>t.contentType==="html"?C():t.contentType==="text"?O(e,n):o==null?void 0:o.getContents(e,n),d=(e,n="api")=>{const l=e||(t.contentType==="delta"?new B:"");t.contentType==="html"?j(l):t.contentType==="text"?T(l,n):o==null||o.setContents(l,n),a=v(l)},O=(e,n)=>{var l;return(l=o==null?void 0:o.getText(e,n))!==null&&l!==void 0?l:""},T=(e,n="api")=>{o==null||o.setText(e,n)},C=()=>{var e;return(e=o==null?void 0:o.root.innerHTML)!==null&&e!==void 0?e:""},j=e=>{o&&(o.root.innerHTML=e)},$=(e,n="api")=>{const l=o==null?void 0:o.clipboard.convert(e);l&&(o==null||o.setContents(l,n))},z=()=>{M(()=>{var e;!i.slots.toolbar&&o&&((e=o.getModule("toolbar"))===null||e===void 0||e.container.remove()),b()})};return f(()=>t.content,e=>{if(!o||!e||h(e))return;const n=o.getSelection();n&&M(()=>o==null?void 0:o.setSelection(n)),d(e)},{deep:!0}),f(()=>t.enable,e=>{o&&o.enable(e)}),{editor:r,getEditor:Q,getToolbar:x,getQuill:H,getContents:g,setContents:d,getHTML:C,setHTML:j,pasteHTML:$,getText:O,setText:T,reinit:z}},render(){var t,i;return[(i=(t=this.$slots).toolbar)===null||i===void 0?void 0:i.call(t),U("div",{ref:"editor",...this.$attrs})]}});export{J as Q};
